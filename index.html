<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>عداد الخطوات</title>

<style>
body{
    background:#111;
    color:#00e5ff;
    font-family:Tahoma;
    text-align:center;
    padding:30px;
}
.card{
    background:#1e1e1e;
    padding:25px;
    border-radius:15px;
    box-shadow:0 0 15px #00e5ff55;
    max-width:350px;
    margin:auto;
}
h1{font-size:22px;}
#steps{font-size:60px;margin:20px 0;}
button{
    background:#00e5ff;
    border:none;
    padding:12px 25px;
    font-size:18px;
    border-radius:10px;
    cursor:pointer;
}
button:hover{opacity:0.9}
</style>
</head>

<body>
<div class="card">
<h1>عداد الخطوات</h1>
<div id="steps">0</div>
<button onclick="start()">بدء الحساب</button>
</div>

<script>
let steps = 0;
let lastMagnitude = 0;
let threshold = 12;

function start(){
    if (typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission().then(permissionState => {
            if (permissionState === 'granted') {
                window.addEventListener("devicemotion", detectStep);
            }
        });
    } else {
        window.addEventListener("devicemotion", detectStep);
    }
}

function detectStep(event){
    let acc = event.accelerationIncludingGravity;
    let magnitude = Math.sqrt(acc.x*acc.x + acc.y*acc.y + acc.z*acc.z);

    let delta = Math.abs(magnitude - lastMagnitude);

    if(delta > threshold){
        steps++;
        document.getElementById("steps").innerText = steps;
    }
    lastMagnitude = magnitude;
}
</script>
</body>
</html>
