<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      text-align: center;
      padding: 20px;
      background: #f8f9fa;
      color: #333;
    }
    .card {
      background: white;
      padding: 25px;
      margin: 20px auto;
      border-radius: 14px;
      max-width: 400px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    h2 {
      margin-top: 0;
      color: #2c3e50;
    }
    .coord {
      font-size: 20px;
      font-family: monospace;
      background: #f1f8ff;
      padding: 12px;
      border-radius: 8px;
      margin: 12px 0;
      direction: ltr;
      text-align: center;
      border: 1px solid #bee0ff;
    }
    #status {
      padding: 12px;
      border-radius: 8px;
      margin: 15px 0;
      font-weight: bold;
    }
    .pending { background: #fff8e1; color: #5d4037; }
    .success { background: #e8f5e9; color: #2e7d32; }
    .error { background: #ffebee; color: #c62828; }
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #2980b9;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h2>
    
    <div id="status" class="pending">Ø¬Ø§Ø±Ù Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</div>

    <div id="lat">Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: â€”</div>
    <div id="lng">Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: â€”</div>

    <button id="startBtn">Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†</button>
  </div>

  <script>
    const statusEl = document.getElementById('status');
    const latEl = document.getElementById('lat');
    const lngEl = document.getElementById('lng');
    const startBtn = document.getElementById('startBtn');

    // ØªØ­ÙˆÙŠÙ„ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¥Ù„Ù‰ Ù†Øµ Ø¹Ø±Ø¨ÙŠ ÙˆØ§Ø¶Ø­
    function updateCoords(lat, lng) {
      latEl.textContent = `Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${lat.toFixed(6)}`;
      lngEl.textContent = `Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${lng.toFixed(6)}`;
    }

    function onLocationSuccess(pos) {
      const { latitude, longitude } = pos.coords;
      statusEl.className = 'success';
      statusEl.textContent = 'âœ… ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­!';
      updateCoords(latitude, longitude);
      
      // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø¹Ø¯Ù‘ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ù„Ø§Ø­Ù‚Ù‹Ø§
      console.log('Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙƒØªØ´Ù:', { latitude, longitude });
    }

    function onLocationError(error) {
      statusEl.className = 'error';
      let msg = 'âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ';
      switch(error.code) {
        case error.PERMISSION_DENIED:
          msg += 'Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø±ÙÙˆØ¶.';
          break;
        case error.POSITION_UNAVAILABLE:
          msg += 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠÙ‹Ù‘Ø§.';
          break;
        case error.TIMEOUT:
          msg += 'Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„Ø·Ù„Ø¨. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.';
          break;
        default:
          msg += 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ.';
      }
      statusEl.textContent = msg;
      console.error('GPS Error:', error);
    }

    function requestLocation() {
      if (!navigator.geolocation) {
        statusEl.className = 'error';
        statusEl.textContent = 'âŒ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.';
        return;
      }

      statusEl.className = 'pending';
      statusEl.textContent = 'ğŸ“ Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ...';

      // Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©)
      navigator.geolocation.getCurrentPosition(
        onLocationSuccess,
        onLocationError,
        {
          enableHighAccuracy: true,   // ÙŠØ³ØªØ®Ø¯Ù… GPS Ø¥Ù† ØªÙˆÙØ±
          timeout: 10000,            // ÙŠÙ†ØªØ¸Ø± 10 Ø«ÙˆØ§Ù†Ù ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰
          maximumAge: 30000          // ÙŠÙ‚Ø¨Ù„ Ù…ÙˆÙ‚Ø¹Ù‹Ø§ Ù‚Ø¯ÙŠÙ…Ù‹Ø§ Ø¨Ø£Ù‚Ù„ Ù…Ù† 30 Ø«Ø§Ù†ÙŠØ©
        }
      );
    }

    // Ø¨Ø¯Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
    startBtn.addEventListener('click', requestLocation);

    // Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ù‘Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ø¥Ù† Ø£Ù…ÙƒÙ†)
    // Ù„ÙƒÙ† Ù…Ø¹Ø¸Ù… Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªØªØ·Ù„Ø¨ ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹ (Ù…Ø«Ù„ Ø§Ù„Ù†Ù‚Ø±)
  </script>
</body>
</html>
